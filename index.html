<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nova Dating</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      background-color: #111827;
      color: white;
      font-family: 'Helvetica', sans-serif;
      margin: 0;
      padding: 0;
    }
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #1f2937;
      padding: 2rem;
      border-radius: 1rem;
      width: 90%;
      max-width: 400px;
      z-index: 50;
    }
    .modal-bg {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 40;
    }
    textarea {
      resize: none;
    }
  </style>
</head>
<body>
<div class="max-w-md mx-auto p-4">
  <!-- User Header -->
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center space-x-3 cursor-pointer" onclick="openProfileModal()">
      <img id="userPhoto" src="default.jpg" alt="User" class="w-12 h-12 rounded-full object-cover">
      <div>
        <div class="text-white font-bold text-lg" id="userName">Welcome!</div>
        <div id="userDetails" class="text-sm text-gray-400"></div>
      </div>
    </div>
  </div>

  <!-- Balance & Credit -->
  <div class="bg-gray-800 p-4 rounded-xl space-y-2">
    <div class="flex justify-between text-sm">
      <span>Balance:</span>
      <span id="balance">$0.00</span>
    </div>
    <div class="flex justify-between text-sm">
      <span>Credit:</span>
      <span id="credit">0</span>
    </div>
    <div class="flex space-x-2 mt-3">
      <button onclick="openDepositModal()" class="bg-green-600 px-4 py-2 rounded-full text-sm">Deposit</button>
      <button onclick="openWithdrawModal()" class="bg-red-600 px-4 py-2 rounded-full text-sm">Withdraw</button>
      <button onclick="openCreditModal()" class="bg-blue-600 px-4 py-2 rounded-full text-sm">Convert to Credit</button>
    </div>
  </div>

  <!-- People You May Know -->
  <h2 class="mt-6 mb-2 text-white font-semibold">People You May Know</h2>
  <div id="userList" class="space-y-4"></div>
</div>

<!-- Profile Edit Modal -->
<div id="profileModal" class="hidden modal-bg">
  <div class="modal">
    <h2 class="text-lg font-bold mb-4">Edit Profile</h2>
    <form id="profileForm">
      <input type="text" id="inputName" placeholder="Your Name" class="w-full mb-2 p-2 rounded text-black" />
      <input type="number" id="inputAge" placeholder="Age" class="w-full mb-2 p-2 rounded text-black" />
      <input type="text" id="inputCountry" placeholder="Country" class="w-full mb-2 p-2 rounded text-black" />
      <input type="text" id="inputHeight" placeholder="Height" class="w-full mb-2 p-2 rounded text-black" />
      <input type="file" id="inputPhoto" accept="image/*" class="w-full mb-2 p-2 rounded" />
      <button type="submit" class="bg-blue-600 w-full py-2 mt-2 rounded">Save</button>
      <button type="button" class="mt-2 text-sm text-gray-300" onclick="closeAllModals()">Cancel</button>
    </form>
  </div>
</div>

<!-- Deposit Modal -->
<div id="depositModal" class="hidden modal-bg">
  <div class="modal">
    <h2 class="text-lg font-bold mb-4">Deposit Funds</h2>
    <p>Send to till number <strong>1234</strong></p>
    <input type="text" id="depositCode" placeholder="Enter confirmation code" class="w-full p-2 rounded text-black mt-2" />
    <input type="number" id="depositAmount" placeholder="Amount" class="w-full p-2 rounded text-black mt-2" />
    <button onclick="processDeposit()" class="bg-green-600 w-full py-2 mt-2 rounded">Confirm</button>
    <button class="mt-2 text-sm text-gray-300" onclick="closeAllModals()">Cancel</button>
  </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="hidden modal-bg">
  <div class="modal">
    <h2 class="text-lg font-bold mb-4">Withdraw Funds</h2>
    <input type="text" id="withdrawCode" placeholder="Enter security code" class="w-full p-2 rounded text-black mt-2" />
    <input type="number" id="withdrawAmount" placeholder="Amount" class="w-full p-2 rounded text-black mt-2" />
    <button onclick="processWithdraw()" class="bg-red-600 w-full py-2 mt-2 rounded">Confirm</button>
    <button class="mt-2 text-sm text-gray-300" onclick="closeAllModals()">Cancel</button>
  </div>
</div>

<!-- Credit Modal -->
<div id="creditModal" class="hidden modal-bg">
  <div class="modal">
    <h2 class="text-lg font-bold mb-4">Convert Balance to Credit</h2>
    <input type="number" id="creditAmount" placeholder="Enter amount to convert" class="w-full p-2 rounded text-black mt-2" />
    <button onclick="processCredit()" class="bg-blue-600 w-full py-2 mt-2 rounded">Confirm</button>
    <button class="mt-2 text-sm text-gray-300" onclick="closeAllModals()">Cancel</button>
  </div>
</div>

<script>
function openCreditModal() {
  document.getElementById("creditModal").classList.remove("hidden");
}

function processCredit() {
  const amount = parseFloat(document.getElementById("creditAmount").value);
  let balance = parseFloat(localStorage.getItem("balance") || 0);
  let credit = parseInt(localStorage.getItem("credit") || 0);
  if (isNaN(amount) || amount <= 0) {
    return alert("Enter a valid amount.");
  }
  if (amount > balance) {
    return alert("Insufficient balance.");
  }
  balance -= amount;
  credit += Math.floor(amount);
  localStorage.setItem("balance", balance);
  localStorage.setItem("credit", credit);
  updateDisplay();
  closeAllModals();
  alert("Converted successfully to credit.");
}

function updateDisplay() {
  document.getElementById("balance").innerText = "$" + (parseFloat(localStorage.getItem("balance")) || 0).toFixed(2);
  document.getElementById("credit").innerText = localStorage.getItem("credit") || 0;
  document.getElementById("userName").innerText = localStorage.getItem("name") || "Welcome!";
  document.getElementById("userPhoto").src = localStorage.getItem("photo") || "default.jpg";
  document.getElementById("userDetails").innerText = `${localStorage.getItem("age") || ""} | ${localStorage.getItem("country") || ""} | ${localStorage.getItem("height") || ""}`;
  document.getElementById("inputName").value = localStorage.getItem("name") || "";
  document.getElementById("inputAge").value = localStorage.getItem("age") || "";
  document.getElementById("inputCountry").value = localStorage.getItem("country") || "";
  document.getElementById("inputHeight").value = localStorage.getItem("height") || "";
}

function closeAllModals() {
  document.querySelectorAll(".modal-bg").forEach(m => m.classList.add("hidden"));
}

function openProfileModal() {
  document.getElementById("profileModal").classList.remove("hidden");
}

function openDepositModal() {
  document.getElementById("depositModal").classList.remove("hidden");
}

function openWithdrawModal() {
  document.getElementById("withdrawModal").classList.remove("hidden");
}

function processDeposit() {
  const code = document.getElementById("depositCode").value;
  const amount = parseFloat(document.getElementById("depositAmount").value);
  if (code === "1234" && amount > 0) {
    let balance = parseFloat(localStorage.getItem("balance") || 0);
    balance += amount;
    localStorage.setItem("balance", balance);
    updateDisplay();
    closeAllModals();
    alert("Deposit successful.");
  } else {
    alert("Invalid code or amount.");
  }
}

function processWithdraw() {
  const code = document.getElementById("withdrawCode").value;
  const amount = parseFloat(document.getElementById("withdrawAmount").value);
  let balance = parseFloat(localStorage.getItem("balance") || 0);
  if (code === "1234" && amount > 0 && amount <= balance) {
    balance -= amount;
    localStorage.setItem("balance", balance);
    updateDisplay();
    closeAllModals();
    alert("Withdrawal successful.");
  } else {
    alert("Invalid code or insufficient funds.");
  }
}

updateDisplay();

document.getElementById("profileForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const name = document.getElementById("inputName").value;
  const age = document.getElementById("inputAge").value;
  const country = document.getElementById("inputCountry").value;
  const height = document.getElementById("inputHeight").value;
  const photoInput = document.getElementById("inputPhoto");
  localStorage.setItem("name", name);
  localStorage.setItem("age", age);
  localStorage.setItem("country", country);
  localStorage.setItem("height", height);
  if (photoInput.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      localStorage.setItem("photo", e.target.result);
      updateDisplay();
    };
    reader.readAsDataURL(photoInput.files[0]);
  } else {
    updateDisplay();
  }
  closeAllModals();
});
</script>
</body>
</html>
